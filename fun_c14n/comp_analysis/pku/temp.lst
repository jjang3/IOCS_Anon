GAS LISTING /tmp/ccG8lATo.s 			page 1


   1              		.file	"pkuapi.c"
   2              		.text
   3              	.Ltext0:
   4              		.globl	pkey_alloc
   5              		.type	pkey_alloc, @function
   6              	pkey_alloc:
   7              	.LFB6:
   8              		.file 1 "src/pkuapi.c"
   1:src/pkuapi.c  **** 
   2:src/pkuapi.c  **** #include "../include/pkey.h"
   3:src/pkuapi.c  **** #include "../include/pkuapi.h"
   4:src/pkuapi.c  **** 
   5:src/pkuapi.c  **** // int
   6:src/pkuapi.c  **** // wrpkru(unsigned int pkru)
   7:src/pkuapi.c  **** // {
   8:src/pkuapi.c  **** //     unsigned int eax = pkru;
   9:src/pkuapi.c  **** //     unsigned int ecx = 0;
  10:src/pkuapi.c  **** //     unsigned int edx = 0;
  11:src/pkuapi.c  **** 
  12:src/pkuapi.c  **** //     asm volatile(".byte 0x0f,0x01,0xef\n\t"
  13:src/pkuapi.c  **** //                  : : "a" (eax), "c" (ecx), "d" (edx));
  14:src/pkuapi.c  **** //     return 0;
  15:src/pkuapi.c  **** // }
  16:src/pkuapi.c  **** 
  17:src/pkuapi.c  **** // int
  18:src/pkuapi.c  **** // pkey_set(int pkey, unsigned long rights, unsigned long flags)
  19:src/pkuapi.c  **** // {
  20:src/pkuapi.c  **** //     unsigned int pkru = (rights << (2 * pkey));
  21:src/pkuapi.c  **** //     return wrpkru(pkru);
  22:src/pkuapi.c  **** // }
  23:src/pkuapi.c  **** 
  24:src/pkuapi.c  **** // int
  25:src/pkuapi.c  **** // pkey_mprotect(void *ptr, size_t size, unsigned long orig_prot,
  26:src/pkuapi.c  **** //                 unsigned long pkey)
  27:src/pkuapi.c  **** // {
  28:src/pkuapi.c  **** //     return syscall(SYS_pkey_mprotect, ptr, size, orig_prot, pkey);
  29:src/pkuapi.c  **** // }
  30:src/pkuapi.c  **** 
  31:src/pkuapi.c  **** int
  32:src/pkuapi.c  **** pkey_alloc(void)
  33:src/pkuapi.c  **** {
   9              		.loc 1 33 1
  10              		.cfi_startproc
  11 0000 55       		pushq	%rbp
  12              		.cfi_def_cfa_offset 16
  13              		.cfi_offset 6, -16
  14 0001 4889E5   		movq	%rsp, %rbp
  15              		.cfi_def_cfa_register 6
  34:src/pkuapi.c  ****     return syscall(SYS_pkey_alloc, 0, 0);
  16              		.loc 1 34 12
  17 0004 BA000000 		movl	$0, %edx
  17      00
  18 0009 BE000000 		movl	$0, %esi
  18      00
  19 000e BF4A0100 		movl	$330, %edi
  19      00
  20 0013 B8000000 		movl	$0, %eax
GAS LISTING /tmp/ccG8lATo.s 			page 2


  20      00
  21 0018 E8000000 		call	syscall@PLT
  21      00
  35:src/pkuapi.c  **** }
  22              		.loc 1 35 1
  23 001d 5D       		popq	%rbp
  24              		.cfi_def_cfa 7, 8
  25 001e C3       		ret
  26              		.cfi_endproc
  27              	.LFE6:
  28              		.size	pkey_alloc, .-pkey_alloc
  29              	.Letext0:
  30              		.section	.debug_info,"",@progbits
  31              	.Ldebug_info0:
  32 0000 95000000 		.long	0x95
  33 0004 0400     		.value	0x4
  34 0006 00000000 		.long	.Ldebug_abbrev0
  35 000a 08       		.byte	0x8
  36 000b 01       		.uleb128 0x1
  37 000c 00000000 		.long	.LASF10
  38 0010 0C       		.byte	0xc
  39 0011 00000000 		.long	.LASF11
  40 0015 00000000 		.long	.LASF12
  41 0019 00000000 		.quad	.Ltext0
  41      00000000 
  42 0021 1F000000 		.quad	.Letext0-.Ltext0
  42      00000000 
  43 0029 00000000 		.long	.Ldebug_line0
  44 002d 02       		.uleb128 0x2
  45 002e 04       		.byte	0x4
  46 002f 05       		.byte	0x5
  47 0030 696E7400 		.string	"int"
  48 0034 03       		.uleb128 0x3
  49 0035 01       		.byte	0x1
  50 0036 06       		.byte	0x6
  51 0037 00000000 		.long	.LASF0
  52 003b 03       		.uleb128 0x3
  53 003c 01       		.byte	0x1
  54 003d 08       		.byte	0x8
  55 003e 00000000 		.long	.LASF1
  56 0042 03       		.uleb128 0x3
  57 0043 02       		.byte	0x2
  58 0044 05       		.byte	0x5
  59 0045 00000000 		.long	.LASF2
  60 0049 03       		.uleb128 0x3
  61 004a 02       		.byte	0x2
  62 004b 07       		.byte	0x7
  63 004c 00000000 		.long	.LASF3
  64 0050 03       		.uleb128 0x3
  65 0051 04       		.byte	0x4
  66 0052 07       		.byte	0x7
  67 0053 00000000 		.long	.LASF4
  68 0057 03       		.uleb128 0x3
  69 0058 08       		.byte	0x8
  70 0059 05       		.byte	0x5
  71 005a 00000000 		.long	.LASF5
  72 005e 03       		.uleb128 0x3
GAS LISTING /tmp/ccG8lATo.s 			page 3


  73 005f 08       		.byte	0x8
  74 0060 07       		.byte	0x7
  75 0061 00000000 		.long	.LASF6
  76 0065 03       		.uleb128 0x3
  77 0066 08       		.byte	0x8
  78 0067 07       		.byte	0x7
  79 0068 00000000 		.long	.LASF7
  80 006c 03       		.uleb128 0x3
  81 006d 08       		.byte	0x8
  82 006e 05       		.byte	0x5
  83 006f 00000000 		.long	.LASF8
  84 0073 03       		.uleb128 0x3
  85 0074 01       		.byte	0x1
  86 0075 06       		.byte	0x6
  87 0076 00000000 		.long	.LASF9
  88 007a 04       		.uleb128 0x4
  89 007b 00000000 		.long	.LASF13
  90 007f 01       		.byte	0x1
  91 0080 20       		.byte	0x20
  92 0081 01       		.byte	0x1
  93 0082 2D000000 		.long	0x2d
  94 0086 00000000 		.quad	.LFB6
  94      00000000 
  95 008e 1F000000 		.quad	.LFE6-.LFB6
  95      00000000 
  96 0096 01       		.uleb128 0x1
  97 0097 9C       		.byte	0x9c
  98 0098 00       		.byte	0
  99              		.section	.debug_abbrev,"",@progbits
 100              	.Ldebug_abbrev0:
 101 0000 01       		.uleb128 0x1
 102 0001 11       		.uleb128 0x11
 103 0002 01       		.byte	0x1
 104 0003 25       		.uleb128 0x25
 105 0004 0E       		.uleb128 0xe
 106 0005 13       		.uleb128 0x13
 107 0006 0B       		.uleb128 0xb
 108 0007 03       		.uleb128 0x3
 109 0008 0E       		.uleb128 0xe
 110 0009 1B       		.uleb128 0x1b
 111 000a 0E       		.uleb128 0xe
 112 000b 11       		.uleb128 0x11
 113 000c 01       		.uleb128 0x1
 114 000d 12       		.uleb128 0x12
 115 000e 07       		.uleb128 0x7
 116 000f 10       		.uleb128 0x10
 117 0010 17       		.uleb128 0x17
 118 0011 00       		.byte	0
 119 0012 00       		.byte	0
 120 0013 02       		.uleb128 0x2
 121 0014 24       		.uleb128 0x24
 122 0015 00       		.byte	0
 123 0016 0B       		.uleb128 0xb
 124 0017 0B       		.uleb128 0xb
 125 0018 3E       		.uleb128 0x3e
 126 0019 0B       		.uleb128 0xb
 127 001a 03       		.uleb128 0x3
GAS LISTING /tmp/ccG8lATo.s 			page 4


 128 001b 08       		.uleb128 0x8
 129 001c 00       		.byte	0
 130 001d 00       		.byte	0
 131 001e 03       		.uleb128 0x3
 132 001f 24       		.uleb128 0x24
 133 0020 00       		.byte	0
 134 0021 0B       		.uleb128 0xb
 135 0022 0B       		.uleb128 0xb
 136 0023 3E       		.uleb128 0x3e
 137 0024 0B       		.uleb128 0xb
 138 0025 03       		.uleb128 0x3
 139 0026 0E       		.uleb128 0xe
 140 0027 00       		.byte	0
 141 0028 00       		.byte	0
 142 0029 04       		.uleb128 0x4
 143 002a 2E       		.uleb128 0x2e
 144 002b 00       		.byte	0
 145 002c 3F       		.uleb128 0x3f
 146 002d 19       		.uleb128 0x19
 147 002e 03       		.uleb128 0x3
 148 002f 0E       		.uleb128 0xe
 149 0030 3A       		.uleb128 0x3a
 150 0031 0B       		.uleb128 0xb
 151 0032 3B       		.uleb128 0x3b
 152 0033 0B       		.uleb128 0xb
 153 0034 39       		.uleb128 0x39
 154 0035 0B       		.uleb128 0xb
 155 0036 27       		.uleb128 0x27
 156 0037 19       		.uleb128 0x19
 157 0038 49       		.uleb128 0x49
 158 0039 13       		.uleb128 0x13
 159 003a 11       		.uleb128 0x11
 160 003b 01       		.uleb128 0x1
 161 003c 12       		.uleb128 0x12
 162 003d 07       		.uleb128 0x7
 163 003e 40       		.uleb128 0x40
 164 003f 18       		.uleb128 0x18
 165 0040 9642     		.uleb128 0x2116
 166 0042 19       		.uleb128 0x19
 167 0043 00       		.byte	0
 168 0044 00       		.byte	0
 169 0045 00       		.byte	0
 170              		.section	.debug_aranges,"",@progbits
 171 0000 2C000000 		.long	0x2c
 172 0004 0200     		.value	0x2
 173 0006 00000000 		.long	.Ldebug_info0
 174 000a 08       		.byte	0x8
 175 000b 00       		.byte	0
 176 000c 0000     		.value	0
 177 000e 0000     		.value	0
 178 0010 00000000 		.quad	.Ltext0
 178      00000000 
 179 0018 1F000000 		.quad	.Letext0-.Ltext0
 179      00000000 
 180 0020 00000000 		.quad	0
 180      00000000 
 181 0028 00000000 		.quad	0
GAS LISTING /tmp/ccG8lATo.s 			page 5


 181      00000000 
 182              		.section	.debug_line,"",@progbits
 183              	.Ldebug_line0:
 184 0000 45000000 		.section	.debug_str,"MS",@progbits,1
 184      03002300 
 184      00000101 
 184      FB0E0D00 
 184      01010101 
 185              	.LASF4:
 186 0000 756E7369 		.string	"unsigned int"
 186      676E6564 
 186      20696E74 
 186      00
 187              	.LASF7:
 188 000d 6C6F6E67 		.string	"long unsigned int"
 188      20756E73 
 188      69676E65 
 188      6420696E 
 188      7400
 189              	.LASF0:
 190 001f 7369676E 		.string	"signed char"
 190      65642063 
 190      68617200 
 191              	.LASF10:
 192 002b 474E5520 		.string	"GNU C17 10.2.1 20210110 -mtune=generic -march=x86-64 -g -fPIC -fasynchronous-unwind-table
 192      43313720 
 192      31302E32 
 192      2E312032 
 192      30323130 
 193              	.LASF13:
 194 0086 706B6579 		.string	"pkey_alloc"
 194      5F616C6C 
 194      6F6300
 195              	.LASF2:
 196 0091 73686F72 		.string	"short int"
 196      7420696E 
 196      7400
 197              	.LASF12:
 198 009b 2F686F6D 		.string	"/home/jaewon/ARCS_Test/fun_c14n/comp_analysis/pku"
 198      652F6A61 
 198      65776F6E 
 198      2F415243 
 198      535F5465 
 199              	.LASF1:
 200 00cd 756E7369 		.string	"unsigned char"
 200      676E6564 
 200      20636861 
 200      7200
 201              	.LASF8:
 202 00db 6C6F6E67 		.string	"long int"
 202      20696E74 
 202      00
 203              	.LASF11:
 204 00e4 7372632F 		.string	"src/pkuapi.c"
 204      706B7561 
 204      70692E63 
 204      00
GAS LISTING /tmp/ccG8lATo.s 			page 6


 205              	.LASF6:
 206 00f1 6C6F6E67 		.string	"long long unsigned int"
 206      206C6F6E 
 206      6720756E 
 206      7369676E 
 206      65642069 
 207              	.LASF9:
 208 0108 63686172 		.string	"char"
 208      00
 209              	.LASF3:
 210 010d 73686F72 		.string	"short unsigned int"
 210      7420756E 
 210      7369676E 
 210      65642069 
 210      6E7400
 211              	.LASF5:
 212 0120 6C6F6E67 		.string	"long long int"
 212      206C6F6E 
 212      6720696E 
 212      7400
 213              		.ident	"GCC: (Debian 10.2.1-6) 10.2.1 20210110"
 214              		.section	.note.GNU-stack,"",@progbits
GAS LISTING /tmp/ccG8lATo.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 pkuapi.c
     /tmp/ccG8lATo.s:6      .text:0000000000000000 pkey_alloc

UNDEFINED SYMBOLS
_GLOBAL_OFFSET_TABLE_
syscall
